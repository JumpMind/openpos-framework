<form [formGroup]="form" class="auto-complete-address-form" responsive-class>
    <ng-container *ngFor="let field of nonAddressFields">
        <ng-container *ngIf="field === streetAddress">
            <app-dynamic-form-field *ngIf="streetAddress" autoCompleteAddress [formGroup]="form"
                [formField]="streetAddress" (onFieldChanged)="onFieldChanged($event)" (onSelect)="setAddress($event)">
            </app-dynamic-form-field>

            <app-dynamic-form-field *ngIf="addressLine2" [formGroup]="form" [formField]="addressLine2"
                (onFieldChanged)="onFieldChanged($event)" (onSelect)="setAddress($event)">
            </app-dynamic-form-field>

            <div class="address-city-state">
                <app-dynamic-form-field *ngIf="locality" [formGroup]="form" [formField]="locality"
                    (onFieldChanged)="onFieldChanged($event)">
                </app-dynamic-form-field>
                <app-dynamic-form-field *ngIf="state" [formGroup]="form" [formField]="state"
                    (onFieldChanged)="onFieldChanged($event)">
                </app-dynamic-form-field>
            </div>

            <div class="address-zip-country">
                <app-dynamic-form-field *ngIf="postalCode" [formGroup]="form" [formField]="postalCode"
                    (onFieldChanged)="onFieldChanged($event)">
                </app-dynamic-form-field>
                <app-dynamic-form-field *ngIf="country" [formGroup]="form" [formField]="country"
                    (onFieldChanged)="onFieldChanged($event)">
                </app-dynamic-form-field>
            </div>
        </ng-container>

        <app-dynamic-form-field *ngIf="field !== streetAddress" [formGroup]="form" [formField]="field"
            (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>

    </ng-container>

    <mat-error>
        <div id="formErrorsWrapper">
            <app-show-errors #formErrors [control]="form"></app-show-errors>
        </div>
        <div *ngFor="let error of screenData.formErrors">{{error}}</div>
    </mat-error>

    <div class="auto-complete-address-buttons">
        <app-primary-button *ngIf="submitButton" (click)="submitForm()"
            [disabled]="!form.valid" [actionItem]="submitButton" (actionClick)="submitForm()">
            <span>{{submitButton.title}}</span>
            <app-icon [iconName]="submitButton.icon" [iconClass]="'material-icons'"></app-icon>
        </app-primary-button>
    </div>
</form>