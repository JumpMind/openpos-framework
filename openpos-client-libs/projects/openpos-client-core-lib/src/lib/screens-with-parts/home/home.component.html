<div [ngStyle]="screen.backgroundImage | backgroundImageUrl" class="home-wrapper">

    <div class="mat-elevation-z10">
        <img *ngIf="screen.logo" [src]="screen.logo | imageUrl" class="home-screen-logo">
        <app-bacon-strip></app-bacon-strip>
    </div>

    <div class="home-content-wrapper" klass.xs="xs">
        <div class="home-content" klass.xs="xs">
            <div *ngIf="!(isMobile | async) && screen.menuItems.length > 0" class="button-grid">
                <div class="menu-button-border"
                    *ngFor="let menuItem of screen.menuItems | paginate: { itemsPerPage: menuItemsPerPage, currentPage: pageNum }"
                    [matBadge]="getNotificationForButton(menuItem)?.value" matBadgePosition="above after"
                    matBadgeSize="large" matBadgeColor="accent" [matBadgeHidden]="!getNotificationForButton(menuItem)"
                    [@bounce]="getNotificationForButton(menuItem)? (bounceInterval | async) : 'down'">
                    <button class="menu-button" mat-raised-button gdAuto="column" color=primary
                        [disabled]="!menuItem.enabled" (click)="onMenuItemClick(menuItem)" [actionItem]="menuItem">
                        <div class="menu-button-content">
                            <app-icon iconName="{{menuItem.icon}}" iconClass="material-icons mat-64"></app-icon>
                            <div class="menu-button-title">{{menuItem.title}}</div>
                            <div *ngIf="menuItem.keybind && keybindsEnabled()" style="padding-bottom: 8px;"
                                class="text-xs">
                                {{menuItem.keybind}}
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <mat-card *ngIf="(isMobile | async) && screen.menuItems.length > 0" class="menu-list">
                <mat-nav-list>
                    <mat-list-item *ngFor="let menuItem of screen.menuItems" (click)="onMenuItemClick(menuItem)">
                        <app-icon class="primary text-lg" iconName="{{menuItem.icon}}" iconClass="material-icons">
                        </app-icon>
                        <span class="primary text-lg">&nbsp;{{menuItem.title}}</span>
                        <span *ngIf="getNotificationForButton(menuItem)"
                            [matBadge]="getNotificationForButton(menuItem).value" matBadgePosition="above after"
                            matBadgeSize="medium" matBadgeColor="accent" class="notification-badge"></span>
                        <mat-icon class="material-icons">keyboard_arrow_right</mat-icon>
                    </mat-list-item>
                </mat-nav-list>
            </mat-card>
        </div>
    </div>

    <div class="status-strip-container">
        <div style="text-align: center;">
            <pagination-template #p="paginationApi" (pageChange)="pageNum = $event">
                <div class="pagination-wrapper" *ngIf="p.pages.length > 1 && !(isMobile | async)">
                    <div *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value"
                        class="pagination-nav-button" klass.xs="xs">
                        <div (click)="p.getCurrent() !== page.value? p.setCurrent(page.value) : null">
                            <span>Page {{ page.label }}</span>
                        </div>
                    </div>
                </div>
            </pagination-template>
        </div>
        <app-status-strip *ngIf="screen.statusStrip"></app-status-strip>
    </div>

</div>