<app-scan-part></app-scan-part>
<app-form *ngIf="screenData" (submitFormEvent)="submitForm()" [form]="form">
    <div responsive-class class="form-part-body">
        <app-content-card>
            <mat-card-content mat-dialog-conten class="form-content">
                <div class="grid-container" [ngClass]="{'grid-container': !(isMobile | async), 'mobile-grid-container': (isMobile | async)}">
                    <div class="BasicInfo">
                        <div class="Portrait">
<!--                            <app-icon [iconName]="'account_circle'" [iconClass]="'material-icons' + ((isMobile | async) ? ' mat-64' : '')"></app-icon>-->
                        </div>
                        <div class="Names">
                            <app-dynamic-form-field [formGroup]="form" [formField]="firstNameField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>
                            <app-dynamic-form-field [formGroup]="form" [formField]="lastNameField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>
                        </div>
                    </div>
                    <div class="Contact">
<!--                        <app-icon matPrefix iconName="Email" iconClass="material-icons md"></app-icon>-->
                        <app-dynamic-form-field [formGroup]="form" [formField]="emailField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>

<!--                        <app-icon matPrefix iconName="Phone" iconClass="material-icons md"></app-icon>-->
                        <div class="Email" *ngFor="let phoneField of phoneFields; let i = index; first as isFirst; last as isLast;">
                            <app-icon *ngIf="isFirst" matPrefix iconName="Email" iconClass="material-icons sm"></app-icon>
                            <app-icon *ngIf="!isFirst" matPrefix iconName="Nothing" iconClass="material-icons sm"></app-icon>

                            <app-dynamic-form-field [formGroup]="form" [formField]="phoneField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>
                            <app-dynamic-form-field *ngIf="phoneLabelFields[i]" [formGroup]="form" [formField]="phoneLabelFields[i]" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>

                            <app-icon matPrefix iconName="Remove" iconClass="material-icons sm"></app-icon>
                            <app-icon *ngIf="isLast" matPrefix iconName="Add" iconClass="material-icons sm"></app-icon>
                            <app-icon *ngIf="!isLast" matPrefix iconName="Nothing" iconClass="material-icons sm"></app-icon>
                        </div>
                    </div>
                    <div class="Loyalty">
<!--                        <app-icon matPrefix iconName="LoyaltyProgram" iconClass="material-icons md"></app-icon>-->
                        <app-dynamic-form-field [formGroup]="form" [formField]="loyaltyNumberField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>
                        <div>No memberships yet (TODO: do proper i18 here)</div>
                    </div>
                    <div class="Zip">
<!--                        <app-icon matPrefix iconName="Location" iconClass="material-icons md"></app-icon>-->
                        <app-dynamic-form-field [formGroup]="form" [formField]="postalCodeField" (onFieldChanged)="onFieldChanged($event)"></app-dynamic-form-field>
                    </div>
                </div>
                <mat-error>
                    <div id="formErrorsWrapper"><app-show-errors #formErrors [control]="form"></app-show-errors></div>
                    <div *ngFor="let error of screenData.formErrors">{{error}}</div>
                </mat-error>
            </mat-card-content>
        </app-content-card>

        <mat-card-actions *ngIf="(buttons && buttons.length > 0) || submitButton" mat-dialog-actions class="buttons">
            <app-secondary-button *ngFor="let button of buttons" (click)="doAction(button)">
                <span>{{button.label}}</span>
                <app-icon *ngIf="button.icon" [iconName]="button.icon"></app-icon>
            </app-secondary-button>
            <app-primary-button *ngIf="submitButton" type="submit" [disabled]="disableSubmitButton || !form.valid || form.pending">
                <span>{{submitButton.title}}</span>
                <app-icon *ngIf="submitButton.icon" [iconName]="submitButton.icon"></app-icon>
            </app-primary-button>
        </mat-card-actions>
    </div>
</app-form>